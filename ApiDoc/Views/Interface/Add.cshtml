@model ApiDoc.Models.InterfaceModel

@{
    ViewData["Title"] = "Add";
    Layout = "~/Views/Shared/_Layout_Edit.cshtml";
}

@section StyleSheet
{

    <style type="text/css">
        .w-lab {
            width: 90px;
            text-align: right;
        }
    </style>
}
<div class="container-fluid py-3">

    <input type="hidden" id="txtSN" value="@Model.SN" />
    <input type="hidden" id="txtFKSN" value="@Model.FKSN" />

    <!--message -->
    <div id="mySuccess" class="toast position-fixed " role="alert" aria-live="assertive" aria-atomic="true" style="top:50%; left:50%; z-index:5;">
        <div class="toast-body bg-success text-white">
            保存成功
        </div>
    </div>

    <div class="container-fluid row pr-0">

        <!-- base info -->
        <div class="col-9 pl-0 ">
            <div class="btn-toolbar mt-0 mb-2 " role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group btn-group-sm border-bottom" role="group" aria-label="First group">
                    <button type="button" class="btn btn-info">基础信息</button>
                    <button type="button" class="btn btn-default" onclick="btnSave_Click()"><i class="fa fa-save"></i></button>
                </div>
            </div>
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                    <div class="input-group-text w-lab">标题</div>
                </div>
                <input type="text" class="form-control" id="txtTitle" value="@Model.Title">
            </div>
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                    <div class="input-group-text w-lab">Url</div>
                </div>
                <input type="text" class="form-control" id="txtUrl" value="@Model.Url">
            </div>
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                    <div class="input-group-text w-lab">返回类型</div>
                </div>
                <select class="custom-select mr-sm" id="cbxReturnType">
                    @if (Model.ReturnType == "Json")
                    {
                        <option value="Json" selected>Json</option>
                        <option value="Xml">Xml</option>
                    }
                    else
                    {
                        <option value="Json">Json</option>
                        <option value="Xml" selected>Xml</option>
                    }
                </select>


            </div>
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                    <div class="input-group-text w-lab">发送方法</div>
                </div>
                <select class="custom-select" id="cbxMethod">
                    @if (Model.Method == "Post")
                    {
                        <option value="Post" selected>Post</option>
                        <option value="Get">Get</option>
                    }
                    else
                    {
                        <option value="Post">Post</option>
                        <option value="Get" selected>Get</option>
                    }

                </select>
            </div>
        </div>

        <!-- param -->
        <div id="myParam" class="col-3 p-0">
            <div class="btn-toolbar w-100" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group btn-group-sm mb-2" role="group" aria-label="Second group">
                    <button type="button" class="btn btn-info">参数</button>
                    <button type="button" class="btn btn-default" onclick=""><i class="fa fa-plus"></i></button>
                    <button type="button" class="btn btn-default" onclick=""><i class="fa fa-edit"></i></button>
                    <button type="button" class="btn btn-default" onclick=""><i class="fa fa-trash-o"></i></button>
                    <button type="button" class="btn btn-default" onclick=""><i class="fa fa-refresh"></i></button>
                </div>
            </div>
            <div class="bg-light" style="height:calc(100% - 40px);">a</div>
        </div>
    </div>

    <!--Step -->
    <div class="btn-toolbar my-2" role="toolbar" aria-label="Toolbar with button groups">
        <div class="btn-group btn-group-sm mr-2" role="group" aria-label="Second group">
            <button type="button" class="btn btn-primary">接口步骤</button>
            <button type="button" class="btn btn-default" onclick="btnShowFlowStep(@Model.SN)"><i class="fa fa-plus"></i></button>
            <button type="button" class="btn btn-default" onclick="btnShowFlowStep(0)"><i class="fa fa-edit"></i></button>
            <button type="button" class="btn btn-default" onclick="btnShowFlowStepDelete()"><i class="fa fa-trash-o"></i></button>
        </div>
    </div>
    <div id="myStepList">
        @*@await Html.PartialAsync("FlowStepList.cshtml");*@
    </div>

</div>


<!-- 步骤 -->
<div class="modal fade" id="myStep" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">工作流</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <input id="txtStepFKSN" type="hidden" value="@Model.SN" />
            <input id="txtStepSN" type="hidden" value="0" />
            <div class="modal-body">
                <div class="form-inline">
                    <label for="txtStepName" class="col-3 col-form-label">步骤名称</label>
                    <div class="col-9">
                        <input class="form-control" id="txtStepName">
                    </div>
                </div>
                <div class="form-inline mt-1">
                    <label for="txtStepOrder" class="col-3 col-form-label">顺序号</label>
                    <div class="col-7">
                        <input type="number" class="form-control" id="txtStepOrder">
                    </div>
                    <div class="custom-control custom-checkbox ml-1 col-auto">
                        <input type="checkbox" class="custom-control-input" id="txtStepIsTransaction">
                        <label class="custom-control-label" for="txtStepIsTransaction">事物</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="btnSaveFlowStep()">Save</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="myModalDelete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">提示信息</h4>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

            </div>
            <div class="modal-body">

                请确认是否要删除

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"><span class="fa fa-close" aria-hidden="true"></span>关闭</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="btnSaveFlowStepDelete(@ViewData["FKSN"])"><span class="fa fa-save" aria-hidden="true"></span>确认</button>
            </div>
        </div>
    </div>
</div>


@section Scripts
{
    <script src="~/js/interface.js"></script>
    <script src="~/js/flowstep.js"></script>
    <script src="~/js/flowstep_action.js"></script>
}

